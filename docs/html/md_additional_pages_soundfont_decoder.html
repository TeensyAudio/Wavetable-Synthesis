<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Teensy Wavetable Synthesis: SoundFont Decoder User-Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Teensy Wavetable Synthesis
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_additional_pages_soundfont_decoder.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SoundFont Decoder User-Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#about">1-0 About</a></li>
<li class="level1"><a href="#decoderGUI">2-0 Using the Decoder with the GUI</a><ul><li class="level2"><a href="#guiLayout">2-1 GUI Layout</a></li>
<li class="level2"><a href="#decodesampleGUI">2-2 Decoding a Sample</a></li>
</ul>
</li>
<li class="level1"><a href="#decodercommandline">3-0 Using the Decoder from the Command Line</a><ul><li class="level2"><a href="#decodesamplecl">3-1 Decoding a Sample</a></li>
<li class="level2"><a href="#CLoptions">3-2 Command Line Options</a></li>
</ul>
</li>
<li class="level1"><a href="#decoderoutput">4-0 Decoder Output</a><ul><li class="level2"><a href="#cppfile">4-1 .cpp file</a></li>
<li class="level2"><a href="#hfile">4-2 .h file</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="about"></a>
1-0 About</h1>
<p>This document is a user guide for the SF2 decoder created for the Wavetable Synthesis Capstone project at Portland State, Fall 2016 - Winter 2017. The decoder described in this document is meant to take SF2 files and translate them into a format that can be used with the <a class="el" href="class_audio_synth_wavetable.html">AudioSynthWavetable</a> library for use on the Teensy 3.2 and 3.6.</p>
<p>Python3 is required for the decoder to operate properly.</p>
<p>More information about the <a class="el" href="class_audio_synth_wavetable.html">AudioSynthWavetable</a> library can be found at: <a href="https://github.com/TeensyAudio/Wavetable-Synthesis">https://github.com/TeensyAudio/Wavetable-Synthesis</a></p>
<p>More information about the Teensy 3.2 and 3.6 can be found at: <a href="https://www.pjrc.com/teensy/index.html">https://www.pjrc.com/teensy/index.html</a></p>
<h1><a class="anchor" id="decoderGUI"></a>
2-0 Using the Decoder with the GUI</h1>
<h2><a class="anchor" id="guiLayout"></a>
2-1 GUI Layout</h2>
<p>The following section covers what each component of the GUI does.</p>
<p>(Image of the GUI with numbers corresponding to descriptions needs to go here)</p>
<ol type="1">
<li>Select Teensy Version: Select the current version of the Teensy that is being decoded for. The size selected will affect the Teensy % usage estimate given when selecting samples. The output files for both options is the same.</li>
<li>Load a SoundFont: Browse for a file with an <code>.sf2</code> extension to load into the decoder. Once a file is selected the file path will is displayed here as well.</li>
<li>Output Settings: Select a name and output location for the .cpp and .h files produced by the decoder. The default name is the instrument name. The default output location is the file the decoder was launched from.</li>
<li>Instrument Window: After a <code>.sf2</code> file is loaded into the decoder all the instruments contained in the file will be listed here. Clicking on an instrument in this window will bring up its samples in the samples window.</li>
<li>Samples Window: Displays all of samples for a given instrument. In this window multiple samples can be selected/deselected by holding <code>ctrl</code> and clicking on each one. A sample is selected when itâ€™s highlighted This window also displays a confirmation message and list of decoded samples when samples have been successfully decoded.</li>
<li>Decode Button: Once the desired samples have been selected in the samples window clicking this button will decode the samples.</li>
<li>Sample Stats: As samples are selected/deselected this window displays quantity, size and Teensy usage information. The Teensy usage % is only an estimate of the actual usage and results may vary.</li>
<li>Status Bar: The current status of the decoder is displayed here.</li>
</ol>
<h2><a class="anchor" id="decodesampleGUI"></a>
2-2 Decoding a Sample</h2>
<p>This section gives a basic walk through of loading a <code>.sf2</code> file, selecting a sample and decoding it with the GUI. </p><h4>Step 1: Load .sf2 file into decoder</h4>
<p>(image)</p>
<h4>Step 2: Select an Instrument to bring up its sample list</h4>
<p>(image)</p>
<h4>Step 3: Select samples to decode from instrument</h4>
<p>(image) Note that multiple samples can be selected if the <code>ctrl</code> button on the keyboard is held during sample selection.</p>
<h4>Step 4: Click the decode button to decode samples</h4>
<p>(image)</p>
<h4>Step 5: Get confirmation message</h4>
<p>(image)</p>
<p>At this point the decoded sample files (<code>.cpp</code> and <code>.h</code>) will be in the output directory and will be named after the selected instrument. By default this directory is the same that the decoder was launched from.</p>
<h1><a class="anchor" id="decodercommandline"></a>
3-0 Using the Decoder from the Command Line</h1>
<h2><a class="anchor" id="decodesamplecl"></a>
3-1 Decoding a Sample</h2>
<p>This section gives a basic walk through of starting the decoder, loading an <code>.sf2</code> file, selecting a sample and decoding it from the command line.</p>
<h4>Step 1: Start the decoder &amp; load <code>.sf2</code> file</h4>
<p>The following shows how to start the decoder with a file <code>Example.sf2</code> </p><pre class="fragment">python3 decoder.py -i Soundfonts/Example.sf2
</pre><h4>Step 2: Select option to bring up instrument list for <code>.sf2</code> file</h4>
<pre class="fragment">       WELCOME  

1. Select by Instrument
2. Quit

Select [1-2]: 1
</pre><h4>Step 3: Enter the number corresponding to the instrument to select samples from</h4>
<pre class="fragment">1. string
2. bass
3. tom
4. mood

Select Instrument [1-4]: 3
</pre><h4>Step 4: Choose to select samples to decode.</h4>
<pre class="fragment">1. Export All Samples
2. Select Samples to Export

Select [1-2]: 2
</pre><p>Alternatively, the option to decode all samples could be chosen and a confirmation message would be displayed before exiting the decoder.</p>
<h4>Step 5: Select samples to decode by entering their number.</h4>
<pre class="fragment">1. mood2
2. mood3

Select Sample [1-2]: 2
</pre><h4>Step 6: Once samples have been selected choose more or save and exit.</h4>
<pre class="fragment">1. Select Again
2. Save and Quit

Select [1-2]: 2
Selected samples for instrument decoded successfully. Exiting Program.
</pre><p>Following step 6 the decoded sample files (<code>.cpp</code> and <code>.h</code>) will be in the output directory and will be named after the selected instrument. By default this directory is the same that the decoder was launched from.</p>
<h2><a class="anchor" id="CLoptions"></a>
3-2 Command Line Options</h2>
<p>There are 2 options available when running the decoder from the command line. <code>-i</code> is the input flag. This option is mandatory for proper operation of the decoder and must precede the name of the <code>.sf2</code> input file. <code>-d</code> is the debug flag. This should only be used when making changes to the decoder and debug info is needed.</p>
<h1><a class="anchor" id="decoderoutput"></a>
4-0 Decoder Output</h1>
<p>This sections gives a brief overview of what is found in the output files created by the decoder.</p>
<h2><a class="anchor" id="cppfile"></a>
4-1 .cpp file</h2>
<p>This file contains a <code>sample_data</code> structure that contains metadata for each sample that was extracted from the <code>.sf2</code> file. Following the <code>sample_data</code> structure is all of the sample arrays holding the audio data. The samples in this file are organized by key range values in ascending order.</p>
<h2><a class="anchor" id="hfile"></a>
4-2 .h file</h2>
<p>This file contains <code>extern</code> declarations for all of the sample arrays in the <code>.cpp</code> file as well as a declaration for the structure that holds the metadata.</p>
<p>This is the file that will be included using a <code>#include</code> statement in an Arduino sketch file so that the samples are available. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
